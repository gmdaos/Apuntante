(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const r of o)if(r.type==="childList")for(const n of r.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&s(n)}).observe(document,{childList:!0,subtree:!0});function e(o){const r={};return o.integrity&&(r.integrity=o.integrity),o.referrerpolicy&&(r.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?r.credentials="include":o.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(o){if(o.ep)return;o.ep=!0;const r=e(o);fetch(o.href,r)}})();class u{static fromJson({id:t,tituloNota:e,cuerpoNota:s,completado:o,creado:r}){const n=new u(e,s);return n.id=t,n.completado=o,n.creado=r,n}constructor(t,e){this.tituloNota=t,this.cuerpoNota=e,this.id=new Date().getTime(),this.completado=!1,this.creado=new Date}imprimirNota(){console.log(`${this.tituloNota} - ${this.id}`)}}class N{constructor(){this.cargarLocalStorage()}nuevaNota(t){this.notas.push(t),this.guardarLocalStorage()}eliminarNota(t){this.notas=this.notas.filter(e=>e.id!=t),this.guardarLocalStorage()}marcarNota(t){for(let e of this.notas)if(e.id==t){e.completado=!e.completado;break}}eliminarCompletados(){this.notas=this.notas.filter(t=>!t.completado),this.guardarLocalStorage()}guardarLocalStorage(){localStorage.setItem("nota",JSON.stringify(this.notas))}cargarLocalStorage(){this.notas=localStorage.getItem("nota")?JSON.parse(localStorage.getItem("nota")):[],this.notas=this.notas.map(t=>u.fromJson(t))}}let l=document.querySelector(".notasContainer");const v=document.querySelector(".guardarNota"),p=document.querySelector(".formNota"),d=document.querySelector(".btnBorrar"),c=Array.from(p),g=a=>{const t=`<div class="accordion-item nota" data-id='${a.id}'>
    <h2 class="accordion-header tituloNota d-flex justify-content-between" id="headingOne">
      <div class="accordion-button d-flex justify-content-between" type="button" data-bs-toggle="collapse" data-bs-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne">
      ${a.tituloNota}
      <div class="btn-gestio">
      <input type="checkbox" class="check-input">
      <button class="fa-solid fa-trash text-primary ms-3"></button>
      </div></div></h2>
    <div id="collapseOne" class="cuerpoNota accordion-collapse collapse  show" aria-labelledby="headingOne" data-bs-parent="#accordionExample">
      <div class="accordion-body">${a.cuerpoNota}</div>
    </div>
  </div>`,e=document.createElement("div");return e.innerHTML=t,l.appendChild(e.firstElementChild),a.tituloNota!=null?e.firstElementChild:l.innerHTML=""};v.addEventListener("click",a=>{if(c[0].value.length>0&&c[1].value.length>0){let t=new u(c[0].value,c[1].value);i.nuevaNota(t),g(t),p.reset(),a.preventDefault()}});l.addEventListener("click",a=>{let t=[],e=a.target,s=a.target.nextElementSibling,o=a.target.localName,r=a.target.parentElement.parentElement.parentElement.parentElement;const n=r.getAttribute("data-id");o.includes("input")?(i.marcarNota(n),i.notas.forEach(m=>{m.completado&&t.push(m.completado)}),e.checked&&(s.classList.add("ocultarBtn"),r.classList.add("marcado")),!e.checked&&(s.classList.remove("ocultarBtn"),r.classList.remove("marcado"))):o.includes("button")&&(i.eliminarNota(n),l.removeChild(r)),t.includes(!0)&&d.classList.add("checked"),t.length==0&&o.includes("input")&&d.classList.remove("checked")});d.addEventListener("click",()=>{let a=l.children;i.eliminarCompletados();for(let t=a.length-1;t>=0;t--){let e=a[t];e.classList.contains("marcado")&&l.removeChild(e)}d.classList.remove("checked")});const i=new N;i.notas.forEach(a=>g(a));const h=document.querySelector(".formNota"),f=document.querySelector(".btnCrearNota");f.addEventListener("click",()=>{h.classList.toggle("hidden"),f.textContent=h.classList.contains("hidden")?"Crear nueva nota":"Cancelar creacion"});
